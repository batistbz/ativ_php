<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lista de Músicas</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white text-white p-8">
<div class="container mx-auto max-w-4xl">
<h1 class="text-4xl font-bold text-center bg-white text-pink-600 mb-8">Minhas Músicas</h1>
<div class="container mx-auto max-w-4xl">
<div class="bg-pink-600 p-4 rounded-lg shadow-lg mb-8 flex items-center justify-between">
<audio id="audio-player" src="" class="hidden"></audio>
<div id="player-info" class="text-sm">
<span class="font-bold" id="player-title">Nenhuma música selecionada</span>
<span class="text-gray-400" id="player-artist"></span>
</div>
<div class="flex items-center">
<button id="play-button" class="bg-white hover:bg-white text-green-600 font-bold py-2 px-4 rounded-full !!!!!!
transition-colors duration-200">
<svg xmlns="http://www.w3.org/2000/svg" 
         fill="currentColor" 
         viewBox="0 0 24 24" 
         class="w-6 h-6">
        <path d="M8 5v14l11-7z"/>
</button>
<button id="pause-button" class="hidden bg-white hover:bg-white text-red-600 font-bold py-2 px-4
rounded-full transition-colors duration-200">
<svg xmlns="http://www.w3.org/2000/svg" 
         fill="currentColor" 
         viewBox="0 0 24 24" 
         class="w-6 h-6">
        <path d="M8 5v14l11-7z"/>
</button>
</div>
</div>
</div>
<div class="bg-pink-600 p-6 rounded-lg shadow-lg">
<table class="w-full text-left table-auto">
<thead>
<tr class="text-white">
<th class="p-3 font-semibold">Título</th>
<th class="p-3 font-semibold">Artista</th>
<th class="p-3 font-semibold">Álbum</th>
</tr>
</thead>
<tbody id="songs-table-body">
</tbody>
</table>
</div>
</div>
<script>
const audioPlayer = document.getElementById('audio-player');
const playButton = document.getElementById('play-button');
const pauseButton = document.getElementById('pause-button');
const playerTitle = document.getElementById('player-title');
const playerArtist = document.getElementById('player-artist');
let allSongs = []; // Variável para armazenar todas as músicas
async function fetchSongs() {
// ... mesma lógica de fetch que já temos ...
const response = await fetch('http://localhost/ativ_php/player/src/list_songs.php');
const result = await response.json();
if (result.status === 'sucesso' && result.data.length > 0) {
allSongs = result.data; // Armazena a lista de músicas
result.data.forEach(song => {
const row = document.createElement('tr');
// ... mesma lógica de criação da linha da tabela ...
row.innerHTML = `
<td class="p-3">${song.titulo}</td>
<td class="p-3">${song.artista}</td>
<td class="p-3">${song.album || 'N/A'}</td>
<td class="p-3">
<button onclick="playSong(${song.id})" class="bg-teal-500 hover:bg-teal-600 text-white fontbold py-1 px-2 rounded text-xs transition-colors duration-200">
Play
</button>
</td>
`;
// ... adicionar a linha à tabela ...
});
}
// ... lógica de erro ...
}
async function playSong(id) {
const song = allSongs.find(s => s.id === id); // Encontra a música pelo ID
if (song) {
// Define a URL do arquivo de áudio
audioPlayer.src = `../music_files/${song.caminho_arquivo}`;
// Toca a música
audioPlayer.play();
// Atualiza as informações exibidas no player
playerTitle.textContent = song.titulo;
playerArtist.textContent = `- ${song.artista}`;
// Mostra o botão de Pause e esconde o de Play
playButton.classList.add('hidden');
pauseButton.classList.remove('hidden');
}
}
function pauseSong() {
audioPlayer.pause();
playButton.classList.remove('hidden');
pauseButton.classList.add('hidden');
}
// Conecta os botões de play e pause com as funções
playButton.addEventListener('click', () => {
audioPlayer.play();
playButton.classList.add('hidden');
pauseButton.classList.remove('hidden');
});
pauseButton.addEventListener('click', pauseSong);
document.addEventListener('DOMContentLoaded', fetchSongs);
</script>
</body>
</html>
